{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Products</title>

  <!-- Your existing CSS -->
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>

  <div class="container">
    <h1>All Products</h1>

    <!-- Search Form (optional) -->
    <form method="get" action="" class="search-bar">
      <input
        type="text"
        name="q"
        placeholder="Search... (example: cello, doms, notebook, blue pen)"
        value="{{ request.GET.q|default:'' }}"
      />
      <button type="submit">Search</button>
    </form>

    <!-- Products Grid -->
    <div class="products-grid">
      {% for p in products %}
        <div class="product-card">

          <!-- ✅ IMAGE -->
          <div class="product-image">
            {% if p.image %}
              <img src="{{ p.image.url }}" alt="{{ p.name }}">
            {% else %}
              <img src="{% static 'img/placeholder.png' %}" alt="No image">
            {% endif %}
          </div>

          <!-- DETAILS -->
          <div class="product-details">
            <h3 class="product-title">{{ p.name }}</h3>

            <p class="product-meta">
              {{ p.brand.name }} • {{ p.category.name }}
            </p>

            <p class="product-price">₹{{ p.price }}</p>

            <!-- STOCK -->
            {% if p.stock_quantity > 0 %}
              <span class="stock-badge in-stock">In stock: {{ p.stock_quantity }}</span>
            {% else %}
              <span class="stock-badge out-stock">Out of stock</span>
            {% endif %}

            <!-- Optional: details link -->
            <div class="product-actions">
              <a class="btn" href="{% url 'product_detail' p.id %}">View</a>
            </div>
          </div>

        </div>
      {% empty %}
        <p>No products found.</p>
      {% endfor %}
    </div>

  </div>

</body>
</html>
